\exercise[1.13]
Let's define set \( A_i \) that contains all permutations of elements in set \( S = \set{ 1, 2, \dots{}, n } \) where \( i \)-th element is on its place.
\[ A_i = \set{ a_1 \dots{} a_i \dots{} a_n : a_i \in S ; \; a_i \; \text{is on its place} } \]

Let's find the cardinality of this set.
From the definition of the set we know that every element \( \)  has \( a_i \) that is in place
\textit{i}. But the positions of other \( a_j ,\; j \neq i \) doesn't matter, so take number of
permutations of these `other \(a_j\)` which is \( (n-1)! \).

\[ \abs{A_i} = (n-1)! \]

Using this built object we can find \( \omega_n \) -- number of set \( S \)
permutations where no number stays in it's place.

\[ \omega_n = P_t - P_s \]

\( P_t \) is total number of permutations of \textit{S} and \( P_s \) is number of permutations of
\textit{S} where exists an element that is in it's place.

Obviously:
\[ P_t = n! \]

And what about \( P_s \)? Let's construct a union of all \(A_i\)

\( \bigcup_{i=1}^{n} A_i \) such a union contains all permutations where an element that is in it's
place exists.

\[ \abs{\bigcup_{i=1}^{n} A_i } = \sum_{i=1}^{n}{\abs{A_i}} - \sum_{i<j}{\abs{A_i \cap A_j}} + \dots
+ (-1)^{n-1}\abs{\bigcap_{i=1}^{n}{A_i}}\]

Here we got a problem. We don't know the cardinality of intersections.

The intersection of two sets \(A_i\) and \(A_j\) contains all permutations where \textit{i}-th and
\textit{j}-th elements are in it's place. The way cardinality of \(A_i\) found we know that two
elemets stay in their positions and others can go anywhere. Find number of permutations with two
elements stay in place:
\[ \abs{A_i \cap A_j} = (n-2)! \]

Similarly for any number of intersections:
\[ \abs{\bigcap_{i=1}^{k}{A_i}} = (n-k)! \]

Last step for \textbf{Inclusionâ€“exclusion principle} -- we need to do something with these sums.

When we used this principle the exact elements and distinction in sum's arguments were not
mentioned. So we only calculate numbers as long as cardinality is found using the statements
above.

So, the number of ways to pick one element from a set \(S\) is \( C_{n}^{1} \), for two elements --
\( C_{n}^{2} \) and so on:

\[ \abs{\bigcup_{i=1}^{n} A_i } = C_{n}^{1} (n-1)! - C_{n}^{2} (n-2)! + \dots + (-1)^{n-1}
    C_{n}^{n} = \]
\[ = \frac{n!}{1! (n-1)!} (n-1)! - \frac{n!}{2! (n-2)!} (n-2)! + \dots + (-1)^{n-1} = \]
\[ = n! - \frac{n!}{2!} + \dots + (-1)^{n-1} \]

Finally find \(\omega_n\):
\[ \omega_n = P_t - P_s = n! - n! + \frac{n!}{2!} - \frac{n!}{3!} + \dots + (-1)^{n} = \]
need to mention that here used \( - (-1)^{n-1} = (-1)^{n} \)
\[ = \frac{n!}{2!} - \frac{n!}{3!} + \dots + (-1)^{n} \]

Last step -- find \( p_n = \ddfrac{\omega_n}{n!} \):

\[ p_n = \ddfrac{\omega_n}{n!} = \frac{n!}{2! n!} - \frac{n!}{3! n!} + \dots + \frac{(-1)^{n}}{n!} =
\frac{1}{2!} - \frac{1}{3!} + \dots + \frac{(-1)^{n}}{n!} \]


